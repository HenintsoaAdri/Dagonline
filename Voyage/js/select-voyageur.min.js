$(document).ready(function(){

    function voyageur() {
        var total = 0;

        $('.voyageur .dropdown-menu > li').each(function() {

            var input = $('input', this);
            input.val(0);

            // suppression voyageurs
            $('.glyphicon-minus', this).click(function(e) {
				e.stopPropagation();
				e.preventDefault();
				if(isNaN(input.val())){
					input.val(0);
				}
                if(input.val() >= 1){
                    input.val(parseInt(input.val()) - 1);
					updateTotal();
                }
				
            });

            // ajout voyageurs
            $('.glyphicon-plus', this).click(function(e) {
				e.stopPropagation();
				e.preventDefault();
				if(isNaN(input.val())){
					input.val(0);
				}
                input.val(parseInt(input.val()) + 1);
				updateTotal();
            });
			input.change(function(){
				updateTotal();
			});
			
        });
    }
	function updateTotal(){
		var total = 0;
		$('.voyageur .dropdown-menu > li').each(function() {
			input = $('input', this);
			if(!isNaN(input.val())){
				total = total + parseInt(input.val());
			}
			else{
				input.val(0);
			}
		});
		$('.total').text(total);
	}
    voyageur();

});